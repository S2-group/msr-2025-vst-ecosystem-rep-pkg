{"total_count": 81, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/srg-imperial/SaBRe/issues/88", "repository_url": "https://api.github.com/repos/srg-imperial/SaBRe", "labels_url": "https://api.github.com/repos/srg-imperial/SaBRe/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/srg-imperial/SaBRe/issues/88/comments", "events_url": "https://api.github.com/repos/srg-imperial/SaBRe/issues/88/events", "html_url": "https://github.com/srg-imperial/SaBRe/pull/88", "id": 1315887109, "node_id": "PR_kwDOCdb2lc47_mod", "number": 88, "title": "Use xmm0 to pass context to post_clone_hook", "user": {"login": "RiscInside", "id": 66870461, "node_id": "MDQ6VXNlcjY2ODcwNDYx", "avatar_url": "https://avatars.githubusercontent.com/u/66870461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RiscInside", "html_url": "https://github.com/RiscInside", "followers_url": "https://api.github.com/users/RiscInside/followers", "following_url": "https://api.github.com/users/RiscInside/following{/other_user}", "gists_url": "https://api.github.com/users/RiscInside/gists{/gist_id}", "starred_url": "https://api.github.com/users/RiscInside/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RiscInside/subscriptions", "organizations_url": "https://api.github.com/users/RiscInside/orgs", "repos_url": "https://api.github.com/users/RiscInside/repos", "events_url": "https://api.github.com/users/RiscInside/events{/privacy}", "received_events_url": "https://api.github.com/users/RiscInside/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "andronat", "id": 793408, "node_id": "MDQ6VXNlcjc5MzQwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/793408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andronat", "html_url": "https://github.com/andronat", "followers_url": "https://api.github.com/users/andronat/followers", "following_url": "https://api.github.com/users/andronat/following{/other_user}", "gists_url": "https://api.github.com/users/andronat/gists{/gist_id}", "starred_url": "https://api.github.com/users/andronat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andronat/subscriptions", "organizations_url": "https://api.github.com/users/andronat/orgs", "repos_url": "https://api.github.com/users/andronat/repos", "events_url": "https://api.github.com/users/andronat/events{/privacy}", "received_events_url": "https://api.github.com/users/andronat/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "andronat", "id": 793408, "node_id": "MDQ6VXNlcjc5MzQwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/793408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andronat", "html_url": "https://github.com/andronat", "followers_url": "https://api.github.com/users/andronat/followers", "following_url": "https://api.github.com/users/andronat/following{/other_user}", "gists_url": "https://api.github.com/users/andronat/gists{/gist_id}", "starred_url": "https://api.github.com/users/andronat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andronat/subscriptions", "organizations_url": "https://api.github.com/users/andronat/orgs", "repos_url": "https://api.github.com/users/andronat/repos", "events_url": "https://api.github.com/users/andronat/events{/privacy}", "received_events_url": "https://api.github.com/users/andronat/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-07-24T11:57:01Z", "updated_at": "2022-07-25T12:27:50Z", "closed_at": "2022-07-25T12:27:49Z", "author_association": "CONTRIBUTOR", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/srg-imperial/SaBRe/pulls/88", "html_url": "https://github.com/srg-imperial/SaBRe/pull/88", "diff_url": "https://github.com/srg-imperial/SaBRe/pull/88.diff", "patch_url": "https://github.com/srg-imperial/SaBRe/pull/88.patch", "merged_at": "2022-07-25T12:27:49Z"}, "body": "This PR modifies `clone_syscall` and `clone3_syscall` signatures to accept context argument (one `void *`). This context argument can then be accessed from the post clone hook.\r\n\r\nThe implementation uses `xmm0` as a vehicle to pass the context argument to the child. The assumption is that it's unlikely libc `clone()` wrappers or other `clone()` users will depend on the value of `xmm0` in the child thread. `xmm0` value is set to NaN (ff bit pattern) after `post_clone_hook` exits, which should allow us to catch some instances of that not being the case.\r\n\r\nParent can use `xmm0` freely, as we save its value on `clone_syscall` /`clone3_syscall` function entry.\r\n\r\nNote that this PR does not make SaBRe any less stable. For example, if the client depends on the `rbx` value in the child, it will get corrupted, as exit path for `clone_syscall` bypasses normal register restore procedure, so the assumption that the child will just call the callback and do nothing else is already there.", "reactions": {"url": "https://api.github.com/repos/srg-imperial/SaBRe/issues/88/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/srg-imperial/SaBRe/issues/88/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]}