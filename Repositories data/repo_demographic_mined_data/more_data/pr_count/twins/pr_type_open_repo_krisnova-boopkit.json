{"total_count": 1, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/krisnova/boopkit/issues/19", "repository_url": "https://api.github.com/repos/krisnova/boopkit", "labels_url": "https://api.github.com/repos/krisnova/boopkit/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/krisnova/boopkit/issues/19/comments", "events_url": "https://api.github.com/repos/krisnova/boopkit/issues/19/events", "html_url": "https://github.com/krisnova/boopkit/pull/19", "id": 1951509914, "node_id": "PR_kwDOHF0z-s5dPCvn", "number": 19, "title": "fix: sometime pcap_next returns 0 which lead to segment fault", "user": {"login": "AntsKnows", "id": 12820652, "node_id": "MDQ6VXNlcjEyODIwNjUy", "avatar_url": "https://avatars.githubusercontent.com/u/12820652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AntsKnows", "html_url": "https://github.com/AntsKnows", "followers_url": "https://api.github.com/users/AntsKnows/followers", "following_url": "https://api.github.com/users/AntsKnows/following{/other_user}", "gists_url": "https://api.github.com/users/AntsKnows/gists{/gist_id}", "starred_url": "https://api.github.com/users/AntsKnows/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AntsKnows/subscriptions", "organizations_url": "https://api.github.com/users/AntsKnows/orgs", "repos_url": "https://api.github.com/users/AntsKnows/repos", "events_url": "https://api.github.com/users/AntsKnows/events{/privacy}", "received_events_url": "https://api.github.com/users/AntsKnows/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-10-19T07:43:18Z", "updated_at": "2023-10-19T07:43:18Z", "closed_at": null, "author_association": "NONE", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/krisnova/boopkit/pulls/19", "html_url": "https://github.com/krisnova/boopkit/pull/19", "diff_url": "https://github.com/krisnova/boopkit/pull/19.diff", "patch_url": "https://github.com/krisnova/boopkit/pull/19.patch", "merged_at": null}, "body": "Meet a segmentation fault situation:\r\nThread 2 \"boopkit\" received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7ffff7cc2700 (LWP 936627)]\r\n0x00000000003100d9 in xcap (v_dev_name=0x315f68 <cfg+12292>) at dpi.c:217\r\n217         ether_type = ntohs(ep->ether_type);\r\n(gdb) bt\r\n#0  0x00000000003100d9 in xcap (v_dev_name=0x315f68 <cfg+12292>) at dpi.c:217\r\n#1  0x00007ffff7ede609 in start_thread (arg=<optimized out>) at pthread_create.c:477\r\n#2  0x00007ffff7e03133 in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n(gdb) p ep\r\n$1 = (struct ether_header *) 0x0\r\n(gdb) p packet\r\n$2 = (const u_char *) 0x0\r\n\r\n\r\nAccording to man pcap_next():\r\npcap_next() returns a pointer  to  the  packet  data  on  success,  and\r\n   returns  NULL  if  an  error occured, or if no packets were read from a\r\n   live capture (if, for example, they were discarded because they  didn't\r\n   pass the packet filter, or if, on platforms that support a read timeout\r\n   that starts before any packets arrive, the timeout expires  before  any\r\n   packets  arrive, or if the file descriptor for the capture device is in\r\n   non-blocking mode and no packets were available to be read), or  if  no\r\n   more  packets are available in a ``savefile.''  Unfortunately, there is\r\n   no way to determine whether an error occured or not.\r\n\r\npcap_next() may returns NULL. So bybass it to avoid segmentation fault.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/krisnova/boopkit/issues/19/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/krisnova/boopkit/issues/19/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]}