{"total_count": 9, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/frewsxcv/rust-notifica/issues/24", "repository_url": "https://api.github.com/repos/frewsxcv/rust-notifica", "labels_url": "https://api.github.com/repos/frewsxcv/rust-notifica/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/frewsxcv/rust-notifica/issues/24/comments", "events_url": "https://api.github.com/repos/frewsxcv/rust-notifica/issues/24/events", "html_url": "https://github.com/frewsxcv/rust-notifica/issues/24", "id": 1677004259, "node_id": "I_kwDOCrtUac5j9Q3j", "number": 24, "title": "On some windows pc, it notify twice.", "user": {"login": "sinojelly", "id": 520711, "node_id": "MDQ6VXNlcjUyMDcxMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/520711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinojelly", "html_url": "https://github.com/sinojelly", "followers_url": "https://api.github.com/users/sinojelly/followers", "following_url": "https://api.github.com/users/sinojelly/following{/other_user}", "gists_url": "https://api.github.com/users/sinojelly/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinojelly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinojelly/subscriptions", "organizations_url": "https://api.github.com/users/sinojelly/orgs", "repos_url": "https://api.github.com/users/sinojelly/repos", "events_url": "https://api.github.com/users/sinojelly/events{/privacy}", "received_events_url": "https://api.github.com/users/sinojelly/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-20T15:57:47Z", "updated_at": "2023-04-20T16:18:45Z", "closed_at": "2023-04-20T16:18:45Z", "author_association": "NONE", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "active_lock_reason": null, "body": "The log only print once, but notificate twice.\r\n```\r\nD:\\develop\\media-tools>file_watch.exe -p \"D:\\Screenshot\"\r\nNew file created, path : D:\\Screenshot\\20230420233702.bmp\r\nNew file created, path : D:\\Screenshot\\20230420235218.bmp\r\nNew file created, path : D:\\Screenshot\\20230420235243.bmp\r\n```\r\nThe code is like this:\r\n```rust\r\nuse std::path::Path;\r\nuse notify::{Watcher, RecursiveMode, Result, Event, EventKind};\r\nuse notify::event::CreateKind;\r\nuse clap::Parser;\r\n\r\n#[derive(Parser, Debug)]\r\n#[command(author, version, about, long_about = None)]\r\nstruct Args {\r\n    #[arg(short, long, default_value = \".\")]\r\n    path: String,\r\n}\r\n\r\nfn main() -> Result<()> {\r\n    ctrlc::set_handler(move || {\r\n        println!(\"Ctrl-C received, exit...\");\r\n        std::process::exit(0);\r\n    } ).expect(\"Set Ctrl-C handler error.\");\r\n\r\n    // Automatically select the best implementation for your platform.\r\n    let mut watcher = notify::recommended_watcher(|res : Result<Event>| {\r\n        match res {\r\n            Ok(event) => {\r\n                if event.kind == EventKind::Create(CreateKind::Any) {\r\n                    let info = format!(\"path : {}\", event.paths[0].to_str().unwrap());\r\n                    println!(\"New file created, {}\", info);\r\n                    notifica::notify(\"Success - new file created\", info.as_str()).expect(\"Show success notification failed.\");\r\n                }\r\n            },\r\n            Err(e) => println!(\"watch error: {:?}\", e),\r\n        }\r\n    })?;\r\n\r\n    let args = Args::parse();\r\n\r\n    // Add a path to be watched. All files and directories at that path and\r\n    // below will be monitored for changes.\r\n    watcher.watch(Path::new(&args.path), RecursiveMode::Recursive)?;\r\n\r\n    loop {\r\n        std::thread::sleep(std::time::Duration::from_millis(60000));\r\n    }\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/frewsxcv/rust-notifica/issues/24/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/frewsxcv/rust-notifica/issues/24/timeline", "performed_via_github_app": null, "state_reason": "completed", "score": 1.0}]}