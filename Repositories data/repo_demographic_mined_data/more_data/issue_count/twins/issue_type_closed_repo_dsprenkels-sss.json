{"total_count": 18, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/dsprenkels/sss/issues/43", "repository_url": "https://api.github.com/repos/dsprenkels/sss", "labels_url": "https://api.github.com/repos/dsprenkels/sss/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/dsprenkels/sss/issues/43/comments", "events_url": "https://api.github.com/repos/dsprenkels/sss/issues/43/events", "html_url": "https://github.com/dsprenkels/sss/issues/43", "id": 2069256345, "node_id": "I_kwDOBTQwO857VliZ", "number": 43, "title": "Repeating shares on embedded device", "user": {"login": "rmurray2", "id": 5521035, "node_id": "MDQ6VXNlcjU1MjEwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5521035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmurray2", "html_url": "https://github.com/rmurray2", "followers_url": "https://api.github.com/users/rmurray2/followers", "following_url": "https://api.github.com/users/rmurray2/following{/other_user}", "gists_url": "https://api.github.com/users/rmurray2/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmurray2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmurray2/subscriptions", "organizations_url": "https://api.github.com/users/rmurray2/orgs", "repos_url": "https://api.github.com/users/rmurray2/repos", "events_url": "https://api.github.com/users/rmurray2/events{/privacy}", "received_events_url": "https://api.github.com/users/rmurray2/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 577084227, "node_id": "MDU6TGFiZWw1NzcwODQyMjc=", "url": "https://api.github.com/repos/dsprenkels/sss/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "dsprenkels", "id": 439973, "node_id": "MDQ6VXNlcjQzOTk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/439973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsprenkels", "html_url": "https://github.com/dsprenkels", "followers_url": "https://api.github.com/users/dsprenkels/followers", "following_url": "https://api.github.com/users/dsprenkels/following{/other_user}", "gists_url": "https://api.github.com/users/dsprenkels/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsprenkels/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsprenkels/subscriptions", "organizations_url": "https://api.github.com/users/dsprenkels/orgs", "repos_url": "https://api.github.com/users/dsprenkels/repos", "events_url": "https://api.github.com/users/dsprenkels/events{/privacy}", "received_events_url": "https://api.github.com/users/dsprenkels/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "dsprenkels", "id": 439973, "node_id": "MDQ6VXNlcjQzOTk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/439973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsprenkels", "html_url": "https://github.com/dsprenkels", "followers_url": "https://api.github.com/users/dsprenkels/followers", "following_url": "https://api.github.com/users/dsprenkels/following{/other_user}", "gists_url": "https://api.github.com/users/dsprenkels/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsprenkels/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsprenkels/subscriptions", "organizations_url": "https://api.github.com/users/dsprenkels/orgs", "repos_url": "https://api.github.com/users/dsprenkels/repos", "events_url": "https://api.github.com/users/dsprenkels/events{/privacy}", "received_events_url": "https://api.github.com/users/dsprenkels/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2024-01-07T19:23:47Z", "updated_at": "2024-01-29T11:06:11Z", "closed_at": "2024-01-15T14:01:14Z", "author_association": "NONE", "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "active_lock_reason": null, "body": "I'd like to use your great library on an embedded device (Arduino), but unfortunately the `randombytes` library doesn't work because there is no OS running on the microcontroller. \r\n\r\nSo I'm running a modified `sss.c` that doesn't rely on `randombytes`. I'm just trying to get a basic working example, and worry about secure implementation later. \r\n\r\n```\r\n#include <stdlib.h>\r\n#include <time.h>\r\n\r\nvoid sss_create_shares(sss_Share *out, const unsigned char *data, uint8_t n, uint8_t k)\r\n{\r\n        srand(time(NULL));\r\n\tunsigned char key[32];\r\n        int val;\r\n\tunsigned char m[crypto_secretbox_ZEROBYTES + sss_MLEN] = { 0 };\r\n\tunsigned long long mlen = sizeof(m); /* length includes zero-bytes */\r\n\tunsigned char c[mlen];\r\n\tint tmp;\r\n\tsss_Keyshare keyshares[n];\r\n\tsize_t idx;\r\n\r\n\t/* Generate a random encryption key */\r\n\t//randombytes(key, sizeof(key));\r\n       \r\n       //generate a key with a different method\r\n       for(int i = 0; i < 32; i++){\r\n             val = rand();  \r\n              key[i] = val;\r\n        }\r\n\r\n```\r\nAnd I'm calling `sss_create_shares` like so: \r\n\r\n\r\n```\r\nsss_Share shares[2];\r\nuint8_t data[sss_MLEN]\r\nstrncpy(data, \"hello\", sizeof(data));\r\nsss_create_shares(shares, data, 2, 2);\r\n\r\nfor(int i = 0; i < sizeof(shares[0]); i++){\r\n    Serial.println(shares[0][i]);\r\n    Serial.println(shares[1][i]);\r\n    Serial.println(\"\");\r\n}\r\n```\r\n\r\n\r\nThe output shows that the shares are exactly the same, except the beginning few characters. The output of the above code looks like (all values at the same idx are the same, except first bits): \r\n\r\n```\r\n93\r\n93\r\n\r\n236\r\n236\r\n\r\n153\r\n153\r\n... \r\n```\r\n\r\nI'm stuck at this point and was hoping for some hint about how it's possible the shares come out pretty much exactly the same. I've a feeling it's because of how I'm making the `key` in `sss_create_shares`\r\n\r\nEDIT: I ended up using [this](https://github.com/BlockchainCommons/bc-shamir) library and it works great", "reactions": {"url": "https://api.github.com/repos/dsprenkels/sss/issues/43/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/dsprenkels/sss/issues/43/timeline", "performed_via_github_app": null, "state_reason": "completed", "score": 1.0}]}