{"total_count": 19, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/pac-dev/protoplug/issues/45", "repository_url": "https://api.github.com/repos/pac-dev/protoplug", "labels_url": "https://api.github.com/repos/pac-dev/protoplug/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/pac-dev/protoplug/issues/45/comments", "events_url": "https://api.github.com/repos/pac-dev/protoplug/issues/45/events", "html_url": "https://github.com/pac-dev/protoplug/issues/45", "id": 1058989748, "node_id": "I_kwDOAUCd-84_Hua0", "number": 45, "title": "problems in the timing API", "user": {"login": "steveschow", "id": 9116800, "node_id": "MDQ6VXNlcjkxMTY4MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/9116800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveschow", "html_url": "https://github.com/steveschow", "followers_url": "https://api.github.com/users/steveschow/followers", "following_url": "https://api.github.com/users/steveschow/following{/other_user}", "gists_url": "https://api.github.com/users/steveschow/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveschow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveschow/subscriptions", "organizations_url": "https://api.github.com/users/steveschow/orgs", "repos_url": "https://api.github.com/users/steveschow/repos", "events_url": "https://api.github.com/users/steveschow/events{/privacy}", "received_events_url": "https://api.github.com/users/steveschow/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-19T23:20:39Z", "updated_at": "2021-11-23T21:26:08Z", "closed_at": "2021-11-23T21:26:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I think I have found a few problems in the midi API regarding some of the timing aspects...perhaps there is something I am missing, please advise if so..but here are the couple of problems I am noting, which frankly makes LuaProtoPlug currently unsuitable for time based midi processing.\r\n\r\n1. `plugin.positionInfo.ppqPosition` is  not what you say it is.  This value, as near as I can see is a fractional beat number according to the host....there is nothing related to the host's **PPQN** ticks coded into that.  We have no way to find out, either, what PPQN resolution the host might be using, but most hosts use PPQN only to dictate their GUI while midi events are stored internally using sample accurate values..which generally translate into either a number of samples...or as a fractional beat value.  The name of this value is confusing and very unclear as to what it actually is, but I suspect it is a fractional beat value, which you should verify and either change the API name or document its true meaning, or both.\r\n\r\n2. We do not have any way to obtain any kind of time reference value for the start of the current process block.  It seems we can obtain from the host what the current location is, using `timeInSeconds` or `ppqPosition`, but the actual start of the process block usually does not line up with the host's current time position.  Meanwhile, each midi Event has a `time` stamp that is relative to the start of the process block.  Therefore we cannot accurately determine the time position of each midi event relative to the song position pointer.  This is demonstrated easily when the transport of the host is stopped...the midi events come in with many different time values..because it will depend on where the midi event came in relative to a process block (which is usually the audio buffer that is always running...but meanwhile `timeInSeconds`, `timeInSamples` and `ppqPosition` are not changing at all while the transport is stopped, which tells me they are not in any way synchronized with the process block start time.  Really LuaProtoPlug should probably ensure that those values for the Host's song position pointer report the value at the start of the current process block...not some other value unrelated to process block.  Anyway, this discrepancy makes LuaProtoPlug incapable of accurate time based midi processing as far as I can see.  Unless there is something I am missing.\r\n \r\n\r\n3. `timeInSamples` is not returning a double value, it is returning `cdata` which I don't know what to do with it.  Can't use it without more info.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pac-dev/protoplug/issues/45/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pac-dev/protoplug/issues/45/timeline", "performed_via_github_app": null, "state_reason": "completed", "score": 1.0}]}