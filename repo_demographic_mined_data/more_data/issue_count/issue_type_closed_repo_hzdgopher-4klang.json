{"total_count": 2, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/hzdgopher/4klang/issues/11", "repository_url": "https://api.github.com/repos/hzdgopher/4klang", "labels_url": "https://api.github.com/repos/hzdgopher/4klang/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/hzdgopher/4klang/issues/11/comments", "events_url": "https://api.github.com/repos/hzdgopher/4klang/issues/11/events", "html_url": "https://github.com/hzdgopher/4klang/issues/11", "id": 618028558, "node_id": "MDU6SXNzdWU2MTgwMjg1NTg=", "number": 11, "title": "Why is the gate oscillator low-pass filtered", "user": {"login": "vsariola", "id": 5684185, "node_id": "MDQ6VXNlcjU2ODQxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/5684185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vsariola", "html_url": "https://github.com/vsariola", "followers_url": "https://api.github.com/users/vsariola/followers", "following_url": "https://api.github.com/users/vsariola/following{/other_user}", "gists_url": "https://api.github.com/users/vsariola/gists{/gist_id}", "starred_url": "https://api.github.com/users/vsariola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vsariola/subscriptions", "organizations_url": "https://api.github.com/users/vsariola/orgs", "repos_url": "https://api.github.com/users/vsariola/repos", "events_url": "https://api.github.com/users/vsariola/events{/privacy}", "received_events_url": "https://api.github.com/users/vsariola/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-14T08:24:47Z", "updated_at": "2020-05-14T10:32:00Z", "closed_at": "2020-05-14T10:32:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm wondering why is the gate oscillator low-pass filtered. Specifically, I'm referring to these [lines](https://github.com/hzdgopher/4klang/blob/e28554120325fcaaebbe8189eef16b57fd83f0a8/4klang_source/4klang.asm#L428). I rewrote the comments to understand what is happening:\r\n\r\n```\r\nfld     dword [WRK+go4kVCO_wrk.gatestate] ; g x, g is gatestate, x is the input to this filter 0/1\r\nfsub    st1                               ; g-x x\r\nfmul    dword [c_dc_const]                ; c(g-x) x\r\nfaddp   st1, st0                          ; x+c(g-x)\r\nfst     dword [WRK+go4kVCO_wrk.gatestate] ; g'=x+c(g-x)\r\n;\r\n; Another way to look at this (remembering that c~0.996)  \r\n; g'=cg+(1-c)x\r\n; output g'\r\n```\r\nThat is a low-pass filter / exponentially decaying moving average of x. I'm looking at the waveforms outputted by the gate and for sure they low-pass filtered versions of the input (gate bit).\r\n\r\nWhy generate an interesting gate signal and then filter all the interesting details away? Maybe gate was meant only for LFOs and this is to slightly smooth the signal?\r\n\r\nOr maybe the point was to have a highpass filter i.e. to remove DC-offset? Then the code should return x-g' instead of g'.\r\n", "reactions": {"url": "https://api.github.com/repos/hzdgopher/4klang/issues/11/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hzdgopher/4klang/issues/11/timeline", "performed_via_github_app": null, "state_reason": "completed", "score": 1.0}]}