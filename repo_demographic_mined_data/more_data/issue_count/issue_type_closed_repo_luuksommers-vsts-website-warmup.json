{"total_count": 12, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/luuksommers/vsts-website-warmup/issues/19", "repository_url": "https://api.github.com/repos/luuksommers/vsts-website-warmup", "labels_url": "https://api.github.com/repos/luuksommers/vsts-website-warmup/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/luuksommers/vsts-website-warmup/issues/19/comments", "events_url": "https://api.github.com/repos/luuksommers/vsts-website-warmup/issues/19/events", "html_url": "https://github.com/luuksommers/vsts-website-warmup/issues/19", "id": 1344891504, "node_id": "I_kwDOBuKzFM5QKWpw", "number": 19, "title": "Multiple success request feature executes much more than the specified number of times", "user": {"login": "cmeeren", "id": 7766733, "node_id": "MDQ6VXNlcjc3NjY3MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/7766733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmeeren", "html_url": "https://github.com/cmeeren", "followers_url": "https://api.github.com/users/cmeeren/followers", "following_url": "https://api.github.com/users/cmeeren/following{/other_user}", "gists_url": "https://api.github.com/users/cmeeren/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmeeren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmeeren/subscriptions", "organizations_url": "https://api.github.com/users/cmeeren/orgs", "repos_url": "https://api.github.com/users/cmeeren/repos", "events_url": "https://api.github.com/users/cmeeren/events{/privacy}", "received_events_url": "https://api.github.com/users/cmeeren/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-19T21:00:18Z", "updated_at": "2022-08-29T08:28:18Z", "closed_at": "2022-08-29T08:26:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Previously mentioned in https://github.com/luuksommers/vsts-website-warmup/issues/13#issuecomment-1207950069 and https://github.com/luuksommers/vsts-website-warmup/issues/13#issuecomment-1210415253.\r\n\r\nThere seems to be a bug in the recent feature (referred to in https://github.com/luuksommers/vsts-website-warmup/issues/13#issuecomment-1201672943) that added support for requiring multiple consecutive success requests. It seems that it starts counting not at 1, but at 0 or a negative number (that varies from run to run), and counts up from there. This means that the task potentially requires many more successful requests than what is configured.\r\n\r\nFor all of the examples below, I have configured 3 successful requests.\r\n\r\nBelow, it starts counting at 0, and therefore actually performs 4 consecutive successful requests. See the last four `Invoke-WebRequest` below.\r\n\r\n```\r\n2022-08-10T09:27:15.9917421Z ##[section]Starting: Warmup website\r\n2022-08-10T09:27:16.0203570Z ==============================================================================\r\n2022-08-10T09:27:16.0203883Z Task         : Website Warmup\r\n2022-08-10T09:27:16.0204117Z Description  : This task warms up a website by calling its url\r\n2022-08-10T09:27:16.0204330Z Version      : 2.2.0\r\n2022-08-10T09:27:16.0204505Z Author       : Luuk Sommers\r\n2022-08-10T09:27:16.0205355Z Help         : [More Information](https://github.com/luuksommers/vsts-website-warmup)\r\n2022-08-10T09:27:16.0205679Z ==============================================================================\r\n2022-08-10T09:27:26.4833026Z Invoke-WebRequest https://chkboxapi-production-swap.azurewebsites.net/maintenance/health/ready, try 1 / 15\r\n2022-08-10T09:27:27.0114269Z ##[warning]The remote server returned an error: (403) Forbidden.\r\n2022-08-10T09:27:27.0122746Z Sleep for 10 seconds, before try 2 / 15\r\n2022-08-10T09:27:37.0136743Z Invoke-WebRequest https://chkboxapi-production-swap.azurewebsites.net/maintenance/health/ready, try 2 / 15\r\n2022-08-10T09:27:37.5676122Z Site is up, check 0 / 3, will do another check.\r\n2022-08-10T09:27:47.5686552Z Invoke-WebRequest https://chkboxapi-production-swap.azurewebsites.net/maintenance/health/ready, try 3 / 15\r\n2022-08-10T09:27:47.8542457Z ##[warning]The remote server returned an error: (503) Server Unavailable.\r\n2022-08-10T09:27:47.8557930Z Sleep for 10 seconds, before try 4 / 15\r\n2022-08-10T09:27:57.8572832Z Invoke-WebRequest https://chkboxapi-production-swap.azurewebsites.net/maintenance/health/ready, try 4 / 15\r\n2022-08-10T09:28:08.6605425Z Site is up, check 0 / 3, will do another check.\r\n2022-08-10T09:28:18.6630322Z Invoke-WebRequest https://chkboxapi-production-swap.azurewebsites.net/maintenance/health/ready, try 5 / 15\r\n2022-08-10T09:28:19.0744945Z Site is up, check 1 / 3, will do another check.\r\n2022-08-10T09:28:29.0762477Z Invoke-WebRequest https://chkboxapi-production-swap.azurewebsites.net/maintenance/health/ready, try 6 / 15\r\n2022-08-10T09:28:29.4754616Z Site is up, check 2 / 3, will do another check.\r\n2022-08-10T09:28:39.4778868Z Invoke-WebRequest https://chkboxapi-production-swap.azurewebsites.net/maintenance/health/ready, try 7 / 15\r\n2022-08-10T09:28:39.8635154Z Site is running in 73.3869983 seconds\r\n2022-08-10T09:28:39.9262744Z ##[section]Finishing: Warmup website\r\n```\r\n\r\nHere is another similar one that starts counting at -1, and therefore performs 5 requests in total:\r\n\r\n```\r\n2022-08-19T10:43:52.3635313Z ##[section]Starting: Warmup website\r\n2022-08-19T10:43:52.3762249Z ==============================================================================\r\n2022-08-19T10:43:52.3762537Z Task         : Website Warmup\r\n2022-08-19T10:43:52.3762787Z Description  : This task warms up a website by calling its url\r\n2022-08-19T10:43:52.3763006Z Version      : 2.2.0\r\n2022-08-19T10:43:52.3763187Z Author       : Luuk Sommers\r\n2022-08-19T10:43:52.3764252Z Help         : [More Information](https://github.com/luuksommers/vsts-website-warmup)\r\n2022-08-19T10:43:52.3764780Z ==============================================================================\r\n2022-08-19T10:43:53.5619782Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 1 / 15\r\n2022-08-19T10:43:53.8333313Z ##[warning]The remote server returned an error: (403) Forbidden.\r\n2022-08-19T10:43:53.8346170Z Sleep for 10 seconds, before try 2 / 15\r\n2022-08-19T10:44:03.8368770Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 2 / 15\r\n2022-08-19T10:44:03.9572196Z ##[warning]The remote server returned an error: (403) Forbidden.\r\n2022-08-19T10:44:03.9586009Z Sleep for 10 seconds, before try 3 / 15\r\n2022-08-19T10:44:13.9557368Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 3 / 15\r\n2022-08-19T10:44:14.4580288Z Site is up, check -1 / 3, will do another check.\r\n2022-08-19T10:44:24.4559789Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 4 / 15\r\n2022-08-19T10:44:24.4888088Z ##[warning]The remote server returned an error: (503) Server Unavailable.\r\n2022-08-19T10:44:24.4900082Z Sleep for 10 seconds, before try 5 / 15\r\n2022-08-19T10:44:34.4963686Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 5 / 15\r\n2022-08-19T10:44:34.6817930Z Site is up, check -1 / 3, will do another check.\r\n2022-08-19T10:44:44.6857212Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 6 / 15\r\n2022-08-19T10:44:44.8532624Z Site is up, check 0 / 3, will do another check.\r\n2022-08-19T10:44:54.8463187Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 7 / 15\r\n2022-08-19T10:44:55.0085428Z Site is up, check 1 / 3, will do another check.\r\n2022-08-19T10:45:05.0114602Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 8 / 15\r\n2022-08-19T10:45:05.1678354Z Site is up, check 2 / 3, will do another check.\r\n2022-08-19T10:45:15.1696103Z Invoke-WebRequest https://app-vbit-api-attachment-prod-002-swap.azurewebsites.net/maintenance/health/ready, try 9 / 15\r\n2022-08-19T10:45:15.3206588Z Site is running in 81.7673991 seconds\r\n2022-08-19T10:45:15.3424086Z ##[section]Finishing: Warmup website\r\n```\r\n\r\nHere is one that starts at -3, and therefore requires 7 consecutive successful requests in total:\r\n\r\n```\r\n2022-08-08T09:41:02.2244697Z ##[section]Starting: Warmup website\r\n2022-08-08T09:41:02.2363044Z ==============================================================================\r\n2022-08-08T09:41:02.2363367Z Task         : Website Warmup\r\n2022-08-08T09:41:02.2363612Z Description  : This task warms up a website by calling its url\r\n2022-08-08T09:41:02.2363853Z Version      : 2.2.0\r\n2022-08-08T09:41:02.2364152Z Author       : Luuk Sommers\r\n2022-08-08T09:41:02.2364985Z Help         : [More Information](https://github.com/luuksommers/vsts-website-warmup)\r\n2022-08-08T09:41:02.2365347Z ==============================================================================\r\n2022-08-08T09:41:05.6374238Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 1 / 10\r\n2022-08-08T09:41:06.2362151Z ##[warning]The remote server returned an error: (403) Forbidden.\r\n2022-08-08T09:41:06.2377693Z Sleep for 10 seconds, before try 2 / 10\r\n2022-08-08T09:41:16.2398283Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 2 / 10\r\n2022-08-08T09:41:16.3900766Z ##[warning]The remote server returned an error: (503) Server Unavailable.\r\n2022-08-08T09:41:16.3907291Z Sleep for 10 seconds, before try 3 / 10\r\n2022-08-08T09:41:26.3925715Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 3 / 10\r\n2022-08-08T09:41:26.4331317Z ##[warning]The remote server returned an error: (503) Server Unavailable.\r\n2022-08-08T09:41:26.4342467Z Sleep for 10 seconds, before try 4 / 10\r\n2022-08-08T09:41:36.4362724Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 4 / 10\r\n2022-08-08T09:43:40.0438304Z ##[warning]The remote server returned an error: (503) Server Unavailable.\r\n2022-08-08T09:43:40.0444623Z Sleep for 10 seconds, before try 5 / 10\r\n2022-08-08T09:43:50.0458284Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 5 / 10\r\n2022-08-08T09:45:43.0124552Z Site is up, check -3 / 3, will do another check.\r\n2022-08-08T09:45:53.0132286Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 6 / 10\r\n2022-08-08T09:45:53.1802277Z Site is up, check -2 / 3, will do another check.\r\n2022-08-08T09:46:03.1816828Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 7 / 10\r\n2022-08-08T09:46:03.3453742Z Site is up, check -1 / 3, will do another check.\r\n2022-08-08T09:46:13.3472068Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 8 / 10\r\n2022-08-08T09:46:13.6955004Z Site is up, check 0 / 3, will do another check.\r\n2022-08-08T09:46:23.6977390Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 9 / 10\r\n2022-08-08T09:46:23.8502033Z Site is up, check 1 / 3, will do another check.\r\n2022-08-08T09:46:34.2991333Z Invoke-WebRequest https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready, try 10 / 10\r\n2022-08-08T09:46:34.2992183Z Site is up, check 2 / 3, will do another check.\r\n2022-08-08T09:46:44.0102306Z Site returned error after 10 tries and in 338.376453 seconds!\r\n2022-08-08T09:46:44.1858270Z ##[error]Error warm-up https://app-vbit-api-authorization-dev-002-swap.azurewebsites.net/maintenance/health/ready\r\n2022-08-08T09:46:44.2130578Z ##[section]Finishing: Warmup website\r\n```", "reactions": {"url": "https://api.github.com/repos/luuksommers/vsts-website-warmup/issues/19/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/luuksommers/vsts-website-warmup/issues/19/timeline", "performed_via_github_app": null, "state_reason": "completed", "score": 1.0}]}